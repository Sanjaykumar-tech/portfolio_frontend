<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Message Received - Sanjay's Portfolio</title>
  <meta name="description" content="Thank you for contacting Sanjay Kumar. Your message has been successfully received.">
  
  <!-- Preload critical resources -->
  <link rel="preload" href="thank-you.css" as="style">
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" as="style">
  
  <!-- Favicon -->
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  
  <!-- CSS -->
  <link rel="stylesheet" href="thank-you.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  
  <!-- Preconnect to CDN for confetti -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
</head>
<body>
  <main class="thank-you-container">
    <div class="thank-you-box" role="alert" aria-live="polite">
      <div class="checkmark-animation">
        <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
          <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/>
          <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
        </svg>
      </div>
      <h1>Message Received!</h1>
      <p>Thank you for reaching out. Your message has been successfully sent and I'll get back to you soon.</p>
      <div class="action-buttons">
        <a href="index.html" class="btn">
          <span class="btn-icon">←</span> Back to Home
        </a>
        <a href="#contact" class="btn secondary">
          <span class="btn-icon">✉️</span> Send Another
        </a>
      </div>
      <audio id="successSound" preload="auto">
         <source src="audio/success.mp3.mp3" type="audio/mpeg">
      </audio>
    </div>
  </main>

  <!-- Confetti effect -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js" async></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
    // Audio initialization
    const successSound = new Audio('audio/success.mp3');
    successSound.preload = 'auto';
    successSound.volume = 0.7; // 70% volume

    // Play sound function with autoplay handling
    function playSuccessSound() {
      successSound.currentTime = 0;
      successSound.play().catch(e => {
        console.log("Audio play blocked, adding fallback");
        // Fallback: Enable audio on next click
        document.body.addEventListener('click', function enableAudio() {
          successSound.play().then(() => successSound.pause());
          document.body.removeEventListener('click', enableAudio);
        }, { once: true });
      });
    }

    // Your existing confetti function
    function fireConfetti() {
      const end = Date.now() + 2000;
      const colors = ['#00ff88', '#00cc66', '#ffffff'];
      
      function frame() {
        confetti({
          particleCount: 3,
          angle: 60,
          spread: 55,
          origin: { x: 0 },
          colors: colors
        });
        confetti({
          particleCount: 3,
          angle: 120,
          spread: 55,
          origin: { x: 1 },
          colors: colors
        });
        
        if (Date.now() < end) {
          requestAnimationFrame(frame);
        }
      }
      
      confetti({
        particleCount: 150,
        spread: 70,
        origin: { y: 0.6 }
      });
      
      setTimeout(frame, 300);
    }

    // Check for reduced motion
    const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
    const motionAllowed = !mediaQuery || !mediaQuery.matches;

    // Form submission handler (add this to your form)
    const contactForm = document.getElementById('contact-form');
    if (contactForm) {
      contactForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Your form processing logic...
        
        // On success:
        playSuccessSound();
        if (motionAllowed) {
          setTimeout(fireConfetti, 300);
        }
        // window.location.href = 'thank-you.html'; // Uncomment if redirecting
      });
    }

    // Your existing Send Another button
    document.querySelector('a.btn.secondary[href="#contact"]').addEventListener('click', function(e) {
      e.preventDefault();
      
      const form = document.getElementById('contact-form');
      if (form) {
        form.reset();
        form.scrollIntoView({ behavior: 'smooth' });
        form.querySelector('input, textarea, select')?.focus();
      }
      
      playSuccessSound();
      if (motionAllowed) {
        fireConfetti();
      }
    });

    // Animation initialization
    setTimeout(() => {
      document.querySelector('.checkmark-animation')?.classList.add('animate');
    }, 100);

    // Prime audio on first click
    document.body.addEventListener('click', function initAudio() {
      successSound.play().then(() => successSound.pause());
      document.body.removeEventListener('click', initAudio);
    }, { once: true });
  });
</script>
</body>
</html>